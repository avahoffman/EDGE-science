# sf_shortgrass <- sf_shortgrass[sf_shortgrass$long > -107,] # Don't take too much of the Rockies
sf_northern <- fill_region(northern_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","northern_steppe")
))
sf_northern <- sf_northern[sf_northern$hole == FALSE,] # Allows Black Hills to be included
sf_chi <- fill_region(desert_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","chihuahuan_desert")
))
usa_map <- map_data("state")
gg <- ggplot() +
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region), fill='black', alpha=0.05) + #add size command to make country lines visible
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region),
fill = NA, colour = "grey") +
theme_map() + # Remove axes
coord_map(xlim = c(-110, -95),ylim = c(27, 45)) + # Crop map
geom_polygon(data = sf_shortgrass,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_northern,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_chi,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
# Add points
geom_point(aes(x=-104.8,y=40.9),size=1.5,color=SGS_color) + ## SGS
geom_point(aes(x=-104.8,y=41.5),size=1.5,color=CHY_color) + ## CHY
geom_point(aes(x=-106.3,y=34),size=1.5,color=SEV_Blue_color) +  ## Sev Blue
geom_point(aes(x=-106.7,y=34),size=1.5,color=SEV_Black_color) +  ## Sev Black
# Add labels
geom_text(aes(x=-104.8,y=40.5),label="SGS") + ## SGS
geom_text(aes(x=-104.8,y=42),label="CHY") + ## CHY
geom_text(aes(x=-105.7,y=34),label="SEV\nBlue") + ## Sev
geom_text(aes(x=-107.3,y=34),label="SEV\nBlack") + ## Sev
geom_text(aes(x=-105,y=30),label=desert_name, color=desert_color) + ## Desert grassland label
geom_text(aes(x=-102.5,y=38),label=shortgrass_name, color=shortgrass_color) + ## Shortgrass label
geom_text(aes(x=-103,y=44),label=northern_name, color=northern_color) + ## Northern grassland label
theme(panel.border = element_rect(colour = "black", fill=NA, size=2)) +
theme(legend.position = "none") +
scale_fill_manual(values=climate_colors)
gg
# ggsave(file="Record_map.pdf",height=4,width=8)
###########################################################################################
##
###########################################################################################
## load libraries
library(ggplot2)  # FYI you need v2.0
library(mapproj)
library(cowplot)
library(ggthemes) # theme_map and tableau colors
library(maps)
library(rgdal)
###########################################################################################
# datapoints <- read.csv("Drylands_dominance.csv",header=T)
# head(datapoints)
# period='1986-2010'
# r <- raster(paste('KG_', period, '.grd', sep=''))
# climate.colors=c("#CC8D14", "#CCAA54", "#FFCC00", "#FFFF64")
# datapoints$size <- datapoints$WOS_record
# r.matrix <- as.matrix(r) ## give KG biome for each coordinate
# KG.colors <- melt(r.matrix)
# KG.colors$Var2 <- (KG.colors$Var2 / 12) - 180 ##rescale to coordinates
# KG.colors$Var1 <- ((KG.colors$Var1 / 12) - 90) *-1 ##rescale to coordinates
# KG.colors._8 <- KG.colors[(KG.colors$value <= 8),]
# KG.colors.5_8 <- KG.colors._8[(KG.colors._8$value >= 5),]
#
fill_region <- function(name, dataframe) { # Add region identifier
dataframe$region <- rep(name, nrow(dataframe))
return(dataframe)
}
shortgrass_color <- '#CC0000'
northern_color <- '#0000CC'
desert_color <- '#FFCC66'
climate_colors <- c(desert_color, northern_color, shortgrass_color)
CHY_color <- '#CC0000'
SGS_color <- '#0000CC'
SEV_Blue_color <- '#00CC33'
SEV_Black_color <- '#FF9900'
shortgrass_name <- "Shortgrass Steppe"
northern_name <- "Northern Mixed Grass"
desert_name <- "Desert Grassland"
sf_shortgrass <- fill_region(shortgrass_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","shortgrass_mtn")
))
# sf_shortgrass <- sf_shortgrass[sf_shortgrass$long > -107,] # Don't take too much of the Rockies
sf_northern <- fill_region(northern_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","northern_steppe")
))
sf_northern <- sf_northern[sf_northern$hole == FALSE,] # Allows Black Hills to be included
sf_chi <- fill_region(desert_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","chihuahuan_desert")
))
usa_map <- map_data("state")
gg <- ggplot() +
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region), fill='black', alpha=0.05) + #add size command to make country lines visible
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region),
fill = NA, colour = "grey") +
theme_map() + # Remove axes
coord_map(xlim = c(-110, -95),ylim = c(27, 45)) + # Crop map
geom_polygon(data = sf_shortgrass,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_northern,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_chi,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
# Add points
geom_point(aes(x=-104.8,y=40.9),size=1.5,color=SGS_color) + ## SGS
geom_point(aes(x=-104.8,y=41.5),size=1.5,color=CHY_color) + ## CHY
geom_point(aes(x=-106.3,y=34),size=1.5,color=SEV_Blue_color) +  ## Sev Blue
geom_point(aes(x=-106.7,y=34),size=1.5,color=SEV_Black_color) +  ## Sev Black
# Add labels
geom_text(aes(x=-104.8,y=40.5),label="SGS") + ## SGS
geom_text(aes(x=-104.8,y=42),label="CHY") + ## CHY
geom_text(aes(x=-105.7,y=34),label="SEV\nBlue") + ## Sev
geom_text(aes(x=-107.3,y=34),label="SEV\nBlack") + ## Sev
geom_text(aes(x=-105,y=30),label=desert_name, color=desert_color) + ## Desert grassland label
geom_text(aes(x=-102.5,y=38),label=shortgrass_name, color=shortgrass_color) + ## Shortgrass label
geom_text(aes(x=-103,y=44),label=northern_name, color=northern_color) + ## Northern grassland label
theme(panel.border = element_rect(colour = "black", fill=NA, size=2),
legend.position = "none") +
scale_fill_manual(values=climate_colors)
gg
# ggsave(file="Record_map.pdf",height=4,width=8)
###########################################################################################
##
###########################################################################################
## load libraries
library(ggplot2)  # FYI you need v2.0
library(mapproj)
library(cowplot)
library(ggthemes) # theme_map and tableau colors
library(maps)
library(rgdal)
###########################################################################################
# datapoints <- read.csv("Drylands_dominance.csv",header=T)
# head(datapoints)
# period='1986-2010'
# r <- raster(paste('KG_', period, '.grd', sep=''))
# climate.colors=c("#CC8D14", "#CCAA54", "#FFCC00", "#FFFF64")
# datapoints$size <- datapoints$WOS_record
# r.matrix <- as.matrix(r) ## give KG biome for each coordinate
# KG.colors <- melt(r.matrix)
# KG.colors$Var2 <- (KG.colors$Var2 / 12) - 180 ##rescale to coordinates
# KG.colors$Var1 <- ((KG.colors$Var1 / 12) - 90) *-1 ##rescale to coordinates
# KG.colors._8 <- KG.colors[(KG.colors$value <= 8),]
# KG.colors.5_8 <- KG.colors._8[(KG.colors._8$value >= 5),]
#
fill_region <- function(name, dataframe) { # Add region identifier
dataframe$region <- rep(name, nrow(dataframe))
return(dataframe)
}
shortgrass_color <- '#CC0000'
northern_color <- '#0000CC'
desert_color <- '#CC9900'
climate_colors <- c(desert_color, northern_color, shortgrass_color)
CHY_color <- '#CC0000'
SGS_color <- '#0000CC'
SEV_Blue_color <- '#00CC33'
SEV_Black_color <- '#FF9900'
shortgrass_name <- "Shortgrass Steppe"
northern_name <- "Northern Mixed Grass"
desert_name <- "Desert Grassland"
sf_shortgrass <- fill_region(shortgrass_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","shortgrass_mtn")
))
# sf_shortgrass <- sf_shortgrass[sf_shortgrass$long > -107,] # Don't take too much of the Rockies
sf_northern <- fill_region(northern_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","northern_steppe")
))
sf_northern <- sf_northern[sf_northern$hole == FALSE,] # Allows Black Hills to be included
sf_chi <- fill_region(desert_name, fortify(
readOGR(
"/Users/avahoffman/Downloads/","chihuahuan_desert")
))
usa_map <- map_data("state")
gg <- ggplot() +
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region), fill='black', alpha=0.05) + #add size command to make country lines visible
geom_map(data=usa_map, map=usa_map, aes(x=long, y=lat, map_id=region),
fill = NA, colour = "grey") +
theme_map() + # Remove axes
coord_map(xlim = c(-110, -95),ylim = c(27, 45)) + # Crop map
geom_polygon(data = sf_shortgrass,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_northern,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
geom_polygon(data = sf_chi,
aes(x = long, y = lat, group=group, fill=region),
size = 0.2, alpha=0.3) +
# Add points
geom_point(aes(x=-104.8,y=40.9),size=1.5,color=SGS_color) + ## SGS
geom_point(aes(x=-104.8,y=41.5),size=1.5,color=CHY_color) + ## CHY
geom_point(aes(x=-106.3,y=34),size=1.5,color=SEV_Blue_color) +  ## Sev Blue
geom_point(aes(x=-106.7,y=34),size=1.5,color=SEV_Black_color) +  ## Sev Black
# Add labels
geom_text(aes(x=-104.8,y=40.5),label="SGS") + ## SGS
geom_text(aes(x=-104.8,y=42),label="CHY") + ## CHY
geom_text(aes(x=-105.7,y=34),label="SEV\nBlue") + ## Sev
geom_text(aes(x=-107.3,y=34),label="SEV\nBlack") + ## Sev
geom_text(aes(x=-105,y=30),label=desert_name, color=desert_color) + ## Desert grassland label
geom_text(aes(x=-102.5,y=38),label=shortgrass_name, color=shortgrass_color) + ## Shortgrass label
geom_text(aes(x=-103,y=44),label=northern_name, color=northern_color) + ## Northern grassland label
theme(panel.border = element_rect(colour = "black", fill=NA, size=2),
legend.position = "none") +
scale_fill_manual(values=climate_colors)
gg
# ggsave(file="Record_map.pdf",height=4,width=8)
shapefile_dir <- wd + "data/"
wd <-
"/Users/avahoffman/Dropbox/Research/EDGE_Science/EDGE-science"
shapefile_dir <- wd + "data/"
wd <-
"/Users/avahoffman/Dropbox/Research/EDGE_Science/EDGE-science"
shapefile_dir <- c(wd,"data/")
shapefile_dir
print(shapefile_dir)
shapefile_dir <- paste(toString(wd),"data/")
shapefile_dir
shapefile_dir <- paste(toString(wd),"data/" sep="")
wd <-
"/Users/avahoffman/Dropbox/Research/EDGE_Science/EDGE-science/"
shapefile_dir <- paste(toString(wd),"data/", sep="")
shapefile_dir
###########################################################################################
## set working directory
source("config.R")
setwd(wd)
###########################################################################################
## set working directory
source("config.R")
setwd(wd)
###########################################################################################
## set working directory
source("config.R")
setwd(wd)
setwd("/Users/avahoffman/Dropbox/Research/EDGE_Science/EDGE-science/src/")
source("config.R")
setwd(wd)
setwd("/Users/avahoffman/Dropbox/Research/EDGE_Science/EDGE-science/src/")
source("config.R")
setwd(wd)
setwd(data_dir)
dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
setwd(wd)
dat
setwd(data_dir)
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments
amb_dat <- raw_dat[(raw_dat$Trt == "con"),]
amb_dat
unique(raw_dat$category)
c4_grasses <- c("BOGR", "BOHI", "BUDA", "C4")
c3_grasses <- c("CAREX", "PASM", "C3")
setwd(data_dir)
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments
amb_dat <- raw_dat[(raw_dat$Trt == "con"),]
#
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses),]
c4_dat
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year)
library(dplyr)
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year)
by_plot_c4
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year)
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments
amb_dat <- raw_dat[(raw_dat$Trt == "con"),]
# collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses),]
# collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses),]
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year)
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year)
by_plot_c3
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(n = n())
by_plot_c4
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum())
by_plot_c4
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(n))
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(biomass))
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(n))
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(biomass))
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments
amb_dat <- raw_dat[(raw_dat$Trt == "con"),]
# collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses),]
# collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses),]
# group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(biomass))
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year)
by_plot_c3
by_plot_c4
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year) %>% summarise(biomass = sum(biomass))
by_plot_c3
# Join tables
full_dat <- full_join(by_plot_c4, by_plot_c3, by = c(Site, Plot, Year))
# Group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <- full_join(by_plot_c4, by_plot_c3, by = c(Site, Plot, Year))
# Join tables
full_dat <- by_plot_c4 %>% full_join(by_plot_c3, by = c(Site, Plot, Year))
# Join tables
full_dat <- full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
full_dat
full_dat$c3_pct <- full_dat$c3_biomass / (full_dat$c3_biomass + full_dat$c4_biomass)
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"),]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years),]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses),]
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses),]
# Group to plot level by year
by_plot_c4 <- c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <- c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <- full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
# create a
full_dat$c3_pct <- full_dat$c3_biomass / (full_dat$c3_biomass + full_dat$c4_biomass)
full_dat
mean(full_dat[full_dat$Site == "CHY"]$c3_pct)
full_dat[full_dat$Site == "CHY"]
chy <- full_dat %>% filter(Site == "CHY")
mean(chy$c3_pct)
chy %>% summarize(mean(c3_pct))
sgs <- full_dat %>% filter(Site == "SGS")
sgs
summary_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= sd(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
# Calculate percentage C3 grass
full_dat$c3_pct <-
full_dat$c3_biomass / (full_dat$c3_biomass + full_dat$c4_biomass)
summary_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= sd(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= sd(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses), ]
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses), ]
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <-
full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
# Calculate percentage C3 grass
full_dat$c3_pct <-
full_dat$c3_biomass / (full_dat$c3_biomass + full_dat$c4_biomass)
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= sd(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
full_dat
print(full_dat, n=130)
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses), ] %>% drop_na()
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses), ] %>% drop_na()
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <-
full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses), ]
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses), ]
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% drop_na() %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% drop_na() %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <-
full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses), ]
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses), ]
c4_dat %>% drop_na()
raw_dat <- read.csv("SGS-CHY_TRT-ANPP_long.csv")
# Filter out any treatments and old years
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- amb_dat[(amb_dat$category %in% c4_grasses), ]
# Collect C3 grasses
c3_dat <- amb_dat[(amb_dat$category %in% c3_grasses), ]
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
amb_dat <- raw_dat[(raw_dat$Trt == "con"), ]
amb_dat <- amb_dat[(amb_dat$Year %in% c3_c4_years), ]
# Collect C4 grasses
c4_dat <- as_tibble(amb_dat[(amb_dat$category %in% c4_grasses), ]) %>% drop_na()
# Collect C3 grasses
c3_dat <- as_tibble(amb_dat[(amb_dat$category %in% c3_grasses), ]) %>% drop_na()
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
# Join tables
full_dat <-
full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
# Collect C4 grasses
c4_dat <- as_tibble(amb_dat[(amb_dat$category %in% c4_grasses), ]) %>% drop_na(biomass)
??drop_na
# Collect C4 grasses
c4_dat <- as_tibble(amb_dat[(amb_dat$category %in% c4_grasses), ])%>% drop_na()
# Collect C4 grasses
c4_dat <- as_tibble(amb_dat[(amb_dat$category %in% c4_grasses), ])
c4_dat
c4_dat %>% drop_na()
print(c4_dat, n=500)
# Collect C4 grasses
c4_dat <- as_tibble(amb_dat[(amb_dat$category %in% c4_grasses), ])
# Collect C3 grasses
c3_dat <- as_tibble(amb_dat[(amb_dat$category %in% c3_grasses), ])
# Group to plot level by year and site
by_plot_c4 <-
c4_dat %>% group_by(Site, Plot, Year) %>% summarise(c4_biomass = sum(biomass))
by_plot_c3 <-
c3_dat %>% group_by(Site, Plot, Year) %>% summarise(c3_biomass = sum(biomass))
print(by_plot_c4, n=500)
print(by_plot_c3, n=500)
# Join tables
full_dat <-
full_join(by_plot_c4, by_plot_c3, by = c("Site", "Plot", "Year"))
print(full_dat, n=500)
# Filter if there is no grass whatsoever
full_dat <- full_dat %>% filter(c4_biomass > 0 & c3_biomass > 0)
# Calculate percentage C3 grass
full_dat$c3_pct <-
full_dat$c3_biomass / (full_dat$c3_biomass + full_dat$c4_biomass)
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= sd(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), sd= se(c3_pct), max = max(c3_pct),min = min(c3_pct))
summary_dat
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), se=se=sd(c3_pct)/sqrt(n()), max = max(c3_pct),min = min(c3_pct))
summary_dat
summary_dat <- full_dat %>% group_by(Site) %>%
summarise(mean= mean(c3_pct), se=sd(c3_pct)/sqrt(n()), max = max(c3_pct),min = min(c3_pct))
summary_dat
summary_dat <- full_dat %>% filter(Site == "CHY") %>%
summarise(
mean = mean(c3_pct),
se = sd(c3_pct) / sqrt(n()),
max = max(c3_pct),
min = min(c3_pct)
)
summary_dat
summary_dat <- full_dat %>% filter(Site == "CHY") %>% group_by(Site) %>%
summarise(
mean = mean(c3_pct),
se = sd(c3_pct) / sqrt(n()),
max = max(c3_pct),
min = min(c3_pct)
)
summary_dat
